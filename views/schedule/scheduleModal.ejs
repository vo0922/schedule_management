<link rel='stylesheet' href='/stylesheets/schedule/scheduleModal.css'/>
<script defer src="/javascripts/schedule/kakaoMap.js"></script>
<script defer src="/javascripts/schedule/scheduleModal.js" defer></script>
<script defer src="/javascripts/schedule/tagModal.js"></script>
<div id="scheduleModal" class="modal">
    <div class="modal-content">
        <!-- 닫기 버튼 -->
        <span class="close" onclick="scheduleModalDone()">
            <i class="fa-regular fa-circle-xmark fa-xl close_icon"></i>
        </span>
        <h3 class="hidden">일정 모달</h3>
        <div id="modal_section">
            <div id="modal_section1" class="modal_section_content">
                <!-- 일정 제목 -->
                <div class="schedule">
                    <label for="schedule_title">
                        <i class="fa-sharp fa-solid fa-plus fa-2xl schedule_title_icon"></i>
                    </label>
                    <!-- 최대 200자까지만 표시, alert 띄워주기! -->
                    <input type="text" id="schedule_title" name="schedule_title" placeholder="일정 제목을 입력해 주세요." maxlength="200"/>
                </div>
                <!-- 시작일 -->
                <div class="schedule">
                    <label for="schedule_start_day"><i class="fa-regular fa-clock fa-xl"></i></label>
                    <input type="datetime-local" id="schedule_start_day" name="schedule_start_day" onchange="DateValidation()">
                </div>
                <!-- 종료일 -->
                <div class="schedule">
                    <label for="schedule_end_day"><i class="fa-sharp fa-solid fa-clock fa-xl"></i></label>
                    <input type="datetime-local" id="schedule_end_day" name="schedule_end_day" onchange="DateValidation()">
                </div>
                <!-- 일정 내용 -->
                <div class="schedule">
                    <label for="schedule_content"><i class="fa-regular fa-pen-to-square fa-xl"></i></label>
                    <textarea id="schedule_content" name="schedule_content" placeholder="일정에 대한 상새 내용을 입력해 주세요."></textarea>
                </div>
                <!-- 태그 입력란 -->
                <div class="schedule tagContent">
                    <label for="schedule_tag"><i class="fa-sharp fa-solid fa-hashtag fa-xl"></i></label>
                    <div class="tag_wrap">
                        <%- include('./tagModal.ejs') %>
                        <div class="tag_write">
                            <div class="tagList_div">
                                <div id="tagList">
                                    
                                </div>
                            </div>    
                            <input type="text" id="tagInput" placeholder="#해시태그" onkeyup="tagKeyUp(this)" oninput="tagInput(this)"/>
                        </div>
                    </div>
                </div>
                <!-- 우선순위 -->
                <div class="schedule">
                    <label for="schedule_priority">우선 순위</label>
                    <!-- 0~5까지 설정 가능, 기본값은 0 -->
                    <input type="range" id="schedule_priority" name="schedule_priority"
                    min="0" max="5" value="0" step="1" 
                    oninput="schedule_priority_num.value = schedule_priority.value"/>
                    <output  id="schedule_priority_num">0</output>
                </div>
                <!-- 주소 옵션 -->
                <div class="schedule">
                    <!-- checkbox 커스텀하기! check가 true일 땐 이 이미지, false일땐 저 이미지 -->
                    <input type="checkbox" id="schedule_address_q" name="schedule_address_q" onclick="show_map()"/>
                    <label for="schedule_address_q">주소를 추가하시겠습니까?</label>
                    <input id="addressInput" style="display: none" type="text" disabled>
                    <input id="address" style="display: none" type="hidden" disabled>
                    <input id="addressLat" style="display: none" type="hidden" disabled>
                    <input id="addressHard" style="display: none" type="hidden" disabled>
                </div>
            </div>
            <div id="modal_section2" class="modal_section">
                <%- include('./kakaoMap.ejs') %>
            </div>
        </div>
        <!-- 저장 btn -->
        <div class="schedule schedule_save">
            <button class="schedule_save_btn" onclick="submitSchedule()">등록</button>
        </div>

    </div>
</div>
<script>
    var now_utc = Date.now() // 지금 날짜를 밀리초로
    // getTimezoneOffset()은 현재 시간과의 차이를 분 단위로 반환
    var timeOff = new Date().getTimezoneOffset()*60000; // 분단위를 밀리초로 변환
    // new Date(today-timeOff).toISOString()은 '2022-05-11T18:09:38.134Z'를 반환
    var today = new Date(now_utc-timeOff).toISOString().substring(0, 16);
    
    document.getElementById("DateLocal").setAttribute("max", today);
    // 체크박스 상태가 체크드 상태가 아니면,
    // 지도 i 태그를 띄워줘라 
    // let cb = document.getElementById('schedule_address_q').checked
    // if(cb == false){
    //     document.getElementById('schedule_address_q').innerHTML = '<i class="fa-sharp fa-solid fa-location-crosshairs"></i>'
    // }else{
    //     document.getElementById('schedule_address_q').innerHTML = '<i class="fa-sharp fa-solid fa-location-crosshairs-slash"></i>'
    // }
    // 체크박스를 클릭했을 때,
    //  show_address_modal-content를 추가해라(class)
<<<<<<< HEAD
    document.getElementById('schedule_address_q').addEventListener('click', function() {
        let cb = document.getElementById('schedule_address_q').checked
        let mc = document.getElementsByClassName('modal-content')[0]
        let ms = document.getElementById('modal_section')
        let msc = document.getElementsByClassName('modal_section_content')
        let tc = document.getElementsByClassName('tagModal-content')
        if(cb == true) {
            mc.classList.add('show_address_modal-content')
            ms.classList.add('modal_section_div')
            // msc.classList[0].add('modal_section')
            tc[0].classList.add('show')
            map.relayout();
        }else{
            mc.classList.remove('show_address_modal-content')
            ms.classList.remove('modal_section_div')
            // msc.classList[0].remove('modal_section')
            tc[0].classList.remove('show') // 적용이 안되고 있어요...
        }
    })
=======
    
>>>>>>> seunghyun_branch

    // hashtag속성에서 어떠한 이벤트가 있을 때?
    // .tagContent의 높이속성을 auto로 바꿔라
    // document.getElementsByClassName('tagContent')[0].addEventListener('mouseover', function() {
    //     let taC = document.getElementsByClassName('schedule')[4].style.height
    //     if(taC != "75px"){
    //         taC = "auto"
    //     }
    // })
    
</script>